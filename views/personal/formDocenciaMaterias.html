<div class="col-sm-11 col11Body">
  <h4 class="titulosForm">Materias impartidas (Máximo 5)</h4>

    {{ for i in range(1,6): }}
    <div class="materia-container" id="materia{{=i}}_container"{{if len(materia_list)<i and 1!=i: }}hidden{{pass}}>
        <h5>Materia {{=i}}</h5>
        <div class="form-row">
            <div class="form-group">
                <label for="materia{{=i}}_area">Área:</label>
                <select {{if len(materia_list)<i and 1!=i:}} disabled {{pass}}
                        class="form-control seleccion-competencia"
                        type="select" name="materia{{=i}}_area"
                        id="materia{{=i}}_area" multiple required
                        data-placeholder="Seleccione las categorías que apliquen">
                        <option value""> Seleccione una opción</option>
                        {{ for comp in competencias: }}
                        <option
                            {{ if i<=len(materia_list):}}
                            {{= 'selected' if comp in materia_list[i-1].f_area else '' }}
                            {{pass}}
                        value"{{=comp}}">{{=comp}}</option>
                        {{pass}}
                </select>
            </div>
    </div>

        <div class="form-row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label for="materia{{=i}}_desde">Desde:</label>
                    <input {{if len(materia_list)<i and 1!=i:}}
                           disabled {{pass}}
                           value="{{='' if len(materia_list)<i else materia_list[i-1].f_fecha_inicio_materia.strftime('%d-%m-%Y')}}"
                           class="datepicker"
                           name="materia{{=i}}_desde" type="text" 
                           id="materia{{=i}}_desde"
                           data-placement="bottom" data-trigger="manual"
                           data-content="Seleccione una fecha"/>
                    <span class="help-block"></span>
                </div>
        </div>


        <div class="col-sm-6">
                <div class="form-group">
                    <label>Hasta:</label>
                    <input {{if len(materia_list)<i and 1!=i:}}
                           disabled {{pass}}
                           value="{{='' if len(materia_list)<i else materia_list[i-1].f_fecha_final_materia.strftime('%d-%m-%Y')}}"
                           class="datepicker"
                           name="materia{{=i}}_hasta" type="text"
                           id="materia{{=i}}_hasta"
                           data-placement="bottom" data-trigger="manual"
                           data-content="Seleccione una fecha">
                    <span class="help-block"></span>
                </div>
        </div>
    </div>

     <div class="form-row">
        <div class="col-sm-6">
            <div class="form-group">
            <label for="materia{{=i}}_codigo">Código:</label>
             <input {{if len(materia_list)<i and 1!=i:}}
                           disabled {{pass}}
                           value="{{='' if len(materia_list)<i else materia_list[i-1].f_codigo}}"
                           type="text" class="form-control"
                           name="materia{{=i}}_codigo"
                           id="materia{{=i}}_codigo"
                           data-toggle="popover" data-placement="bottom"
                           data-trigger="manual" data-content="Este campo es requerido">
                    <span class="help-block"></span>
                </div>
            </div>

        <div class="col-sm-6">
            <div class="form-group">
            <label for="materia{{=i}}_nombre_materia">Materia:</label>
             <input {{if len(materia_list)<i and 1!=i:}}
                           disabled {{pass}}
                           value="{{='' if len(materia_list)<i else materia_list[i-1].f_nombre_materia}}"
                           type="text" class="form-control"
                           name="materia{{=i}}_nombre_materia"
                           id="materia{{=i}}_nombre_materia"
                           data-toggle="popover" data-placement="bottom"
                           data-trigger="manual" data-content="Este campo es requerido">
                    <span class="help-block"></span>
                </div>
            </div>
     </div>

    {{pass}}

</div>

<a href="#" id="add_field_p" onclick="add_field_p()">Agregar materia</a>


<script charset="utf-8">
    var nump = 2
    function add_field_p(){
        if(nump < 6){
            $('#materia'+nump+'_container').show();
            $('#materia'+nump+'_area').prop('disabled', false);
            $('#materia'+nump+'_desde').prop('disabled', false);
            $('#materia'+nump+'_hasta').prop('disabled', false);
            $('#materia'+nump+'_codigo').prop('disabled', false);
            $('#materia'+nump+'_nombre_materia').prop('disabled', false);
        nump = nump+1;
        if (nump >5){
            $('#add_field_p').remove();
            }
        }
    }
</script>
