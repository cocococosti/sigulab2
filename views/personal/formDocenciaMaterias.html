<h3>Materias impartidas (Máximo 5)</h3>

  {{ for i in range(1,6): }}
    <div class="materia-container" id="materia-container{{=i}}"{{if len(materia_list)<i and 1!=i: }}hidden{{pass}}>
        <h5>Materia {{=i}}</h5>


            <div class="form-group">
                <label for="materia">Área:</label>
                <select {{if len(materia_list)<i and 1!=i:}} disabled {{pass}}
                        class="form-control seleccion-competencia"
                        type="select" name="materia{{=i}}_area"
                        id="materia{{=i}}_area" 
                        data-placeholder="Seleccione el área">
                        <option value""> Seleccione una opción</option>
                        {{ for mat in materias: }}
                        <option
                            {{ if i<=len(materia_list):}}
                            {{= 'selected' if mat in materia_list[i-1].f_area else '' }}
                            {{pass}}
                        value"{{=mat}}">{{=mat}}</option>
                        {{pass}}
                </select>
            </div>

            <div class="col-sm-6">
                <div class="form-group">
                    <label for="materia{{=i}}_fecha_inicio_materia">Desde:</label>
                    <input {{if len(materia_list)<i and 1!=i:}}
                           disabled {{pass}}
                           value="{{='' if len(materia_list)<i else materia_list[i-1].f_fecha_inicio_materia.strftime('%d-%m-%Y')}}"
                           class="datepicker"
                           name="materia{{=i}}_fecha_inicio_materia" type="text" 
                           id="materia{{=i}}_fecha_inicio_materia"
                           data-placement="bottom" data-trigger="manual"
                           data-content="Seleccione una fecha"/>
                    <span class="help-block"></span>
                </div>
            </div>


            <div class="col-sm-6">
                <div class="form-group">
                    <label>Hasta:</label>
                    <input {{if len(materia_list)<i and 1!=i:}}
                           disabled {{pass}}
                           value="{{='' if len(materia_list)<i else materia_list[i-1].f_fecha_final_materia.strftime('%d-%m-%Y')}}"
                           class="datepicker"
                           name="materia{{=i}}_fecha_final_materia" type="text"
                           id="materia{{=i}}_fecha_final_materia"
                           data-placement="bottom" data-trigger="manual"
                           data-content="Seleccione una fecha">
                    <span class="help-block"></span>
                </div>
            </div>

            <div class="col-sm-6">
                <div class="form-group">
                  <label for="materia{{=i}}_codigo">Código:</label>
                  <input {{if len(materia_list)<i and 1!=i:}}
                             disabled {{pass}}
                             value="{{='' if len(materia_list)<i else materia_list[i-1].f_codigo}}"
                             type="text" class="form-control"
                             name="materia{{=i}}_codigo"
                             id="materia{{=i}}_codigo"
                             data-toggle="popover" data-placement="bottom"
                             data-trigger="manual" data-content="Este campo es requerido">
                          <span class="help-block"></span>
                </div>
            </div>

            <div class="col-sm-6">
                <div class="form-group">
                  <label for="materia{{=i}}_nombre_materia">Materia:</label>
                  <input {{if len(materia_list)<i and 1!=i:}}
                               disabled {{pass}}
                               value="{{='' if len(materia_list)<i else materia_list[i-1].f_nombre_materia}}"
                               type="text" class="form-control"
                               name="materia{{=i}}_nombre_materia"
                               id="materia{{=i}}_nombre_materia"
                               data-toggle="popover" data-placement="bottom"
                               data-trigger="manual" data-content="Este campo es requerido">
                        <span class="help-block"></span>
                </div>
            </div>
    </div>

  {{pass}}

<a href="#" id="add_field_p" onclick="add_field_p()">Agregar materia</a>

<script charset="utf-8">
    var nump = 2
    function add_field_p(){
        if(nump < 6){
            $('#materia-container'+nump).show();
            $('#materia'+nump+'_area').prop('disabled', false).trigger("chosen:updated");
            $('#materia'+nump+'_fecha_inicio_materia').prop('disabled', false);
            $('#materia'+nump+'_fecha_final_materia').prop('disabled', false);
            $('#materia'+nump+'_codigo').prop('disabled', false);
            $('#materia'+nump+'_nombre_materia').prop('disabled', false);
        nump = nump+1;
        if (nump > 5){
            $('#add_field_p').remove();
            }
        }
    }
</script>
